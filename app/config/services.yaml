parameters:
    app_file_directory: "%kernel.project_dir%/public/data"
    security_auth_token: "%env(string:SECURITY_AUTH_TOKEN)%"
    env(DATABASE_URL): ''

services:
    _defaults:
        autowire: true
        autoconfigure: true
        bind:
            $debug: "%kernel.debug%"
            $storageDirectory: "%app_file_directory%"

    App\:
        resource: '../src/*'
        exclude: '../src/{DependencyInjection,Entity,Migrations,Tests,Kernel.php}'

    App\EventSubscriber\:
        resource: '../src/EventSubscriber'
        tags: ['event.subscriber', 'container.hot_path']

    App\Twig\:
        resource: '../src/Twig'
        tags: ['twig.extension', 'container.hot_path']

    App\Controller\Admin\:
        resource: '../src/Controller/Admin'
        tags: ['controller.service_arguments']

    App\Controller\Endpoint\:
        resource: '../src/Controller/Endpoint'
        tags: ['controller.service_arguments']

    App\Controller\Front\:
        resource: '../src/Controller/Front'
        tags: ['controller.service_arguments']

    App\Security\ChefAuthenticator:
        arguments: ["@router", "%security_auth_token%"]

    goat.runner:
        alias: Goat\Runner\Runner
